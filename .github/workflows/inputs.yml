name: Download Input

on:
  push:
  schedule:
    - cron: "0 5 * * *"

jobs:
  download-input:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Download input
        run: |
          day=$(date +%d)
          url_day=$(echo $day | sed 's/^0*//')
          curl --cookie "session=${SESSION}" \
            -o AdventOfCode/Inputs/${day}.txt \
            "https://adventofcode.com/2021/day/${url_day}/input"
        env:
          SESSION: ${{ secrets.AOC_SESSION_COOKIE }}

      - name: Commit input
        run: |
          git add .
          git commit -m "Adding todays input"
          git push
